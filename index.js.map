{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/config.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport iziToast from \"izitoast\";\n\nconst galleryList = document.querySelector(\".gallery__list\");\n\nexport const showGallery = (images, isNewSearchRequest) => {\n\t// Check if this is a new Search Request\n\tif (isNewSearchRequest) {\n\t\tgalleryList.innerHTML = \"\";\n\t}\n\n\t// If no images were found\n\tif (images.length === 0) {\n\t\treturn iziToast.error({\n\t\t\tclass: \"error\",\n\t\t\ttitleColor: \"#fff\",\n\t\t\ttitleSize: \"16px\",\n\t\t\ttitleLineHeight: \"1.5\",\n\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\tbackgroundColor: \"#ef4040\",\n\t\t\tcolor: \"white\",\n\t\t\tmessageColor: \"#fff\",\n\t\t\tmessageSize: \"16px\",\n\t\t\tmessageLineHeight: \"1.5\",\n\t\t\ticonUrl: new URL(\"../img/error.svg\", import.meta.url).href,\n\t\t\ticonColor: \"#fff\",\n\t\t\tclose: true,\n\t\t\tcloseOnEscape: true,\n\t\t\tprogressBarColor: \"#b51b1b\",\n\t\t\tposition: \"topRight\",\n\t\t\ttimeout: 4500,\n\t\t\tanimateInside: false,\n\t\t\ttransitionIn: \"bounceInLeft\"\n\t\t});\n\t}\n\n\t// Build gallery\n\tgalleryList.insertAdjacentHTML(\"beforeend\", generateGalleryItems(images));\n\tfunction generateGalleryItems(images) {\n\t\treturn images.map(image => {\n\t\t\treturn `\n\t\t\t<li class=\"gallery__item\">\n\t\t\t\t<a class=\"gallery__link\" href=\"${image.largeImageURL}\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tclass=\"gallery__image\"\n\t\t\t\t\t\tsrc=\"${image.webformatURL}\"\n\t\t\t\t\t\tdata-source=\"${image.largeImageURL}\"\n\t\t\t\t\t\talt=\"${image.tags}\"\n\t\t\t\t\t\twidth=\"360\"\n\t\t\t\t\t\theight=\"200\"\n\t\t\t\t\t/>\n\t\t\t\t\t<ul class=\"gallery__details-list\">\n\t\t\t\t\t\t<li class=\"gallery__details-item\">\n\t\t\t\t\t\t\t<div class=\"gallery__details-name\">Likes</div>\n\t\t\t\t\t\t\t<div class=\"gallery__details-value\">${image.likes}</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"gallery__details-item\">\n\t\t\t\t\t\t\t<div class=\"gallery__details-name\">Views</div>\n\t\t\t\t\t\t\t<div class=\"gallery__details-value\">${image.views}</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"gallery__details-item\">\n\t\t\t\t\t\t\t<div class=\"gallery__details-name\">Comments</div>\n\t\t\t\t\t\t\t<div class=\"gallery__details-value\">${image.comments}</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"gallery__details-item\">\n\t\t\t\t\t\t\t<div class=\"gallery__details-name\">Downloads</div>\n\t\t\t\t\t\t\t<div class=\"gallery__details-value\">${image.downloads}</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t`;\n\t\t}).join(\"\");\n\t}\n\n\t// ==========================================================================================================================\n\n\t// Enlarge image\n\tlet gallery = new SimpleLightbox(\".gallery__link\", {\n\t\tcaptions: true,\n\t\tcaptionSelector: \".gallery__image\",\n\t\tcaptionType: \"attr\",\n\t\tcaptionsData: \"alt\",\n\t\tcaptionPosition: \"bottom\",\n\t\tcaptionDelay: 250,\n\t});\n\tgallery.refresh();\n}","export const API_KEY = \"1888761-41f12aec6f7b50c314bb89730\";\nexport const BASE_URL = \"https://pixabay.com/api/\";\n","import { API_KEY, BASE_URL } from \"./config\"\n\nimport iziToast from \"izitoast\";\nimport axios from 'axios';\n\nconst loadMoreBtn = document.querySelector(\".gallery__btn-more\");\n\n// Page number\nlet pageNumber = 1;\n// Number of results per page\nconst resultPerPage = 15;\n\nexport const getImagesPixabay = async (searchRequest, isNewSearchRequest) => {\n\n\t// Show loader\n\tconst loader = document.querySelector(\".gallery__loader-overlay\");\n\tloader.classList.add(\"_active\");\n\n\t// Check if this is a new Search Request\n\tif (isNewSearchRequest) {\n\t\tpageNumber = 1;\n\t}\n\n\t// Hide button \"Load more\" after first request\n\tif (loadMoreBtn.classList.contains(\"_active\")) {\n\t\tloadMoreBtn.classList.remove(\"_active\");\n\t}\n\n\t// Fetch data from the backend\n\ttry {\n\t\t// Блок коду, де можуть виникати помилки\n\t\tconst responseData = await fetchImages(searchRequest);\n\n\t\t// Total number of pages\n\t\tconst totalPages = Math.ceil(responseData.totalHits / resultPerPage); // totalHits - total number of images (maximum 500)\n\n\t\t// Check the end of the collection to display an Alert\n\t\tif (pageNumber >= totalPages && totalPages > 0) {\n\t\t\tloadMoreBtn.classList.remove(\"_active\");;\n\t\t\tloader.classList.remove(\"_active\");\n\t\t\tiziToast.info({\n\t\t\t\tclass: \"info\",\n\t\t\t\ttitleColor: \"#fff\",\n\t\t\t\ttitleSize: \"16px\",\n\t\t\t\ttitleLineHeight: \"1.5\",\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results\",\n\t\t\t\tbackgroundColor: \"#09f\",\n\t\t\t\tcolor: \"white\",\n\t\t\t\tmessageColor: \"#fff\",\n\t\t\t\tmessageSize: \"16px\",\n\t\t\t\tmessageLineHeight: \"1.5\",\n\t\t\t\ticonUrl: new URL(\"../img/bell.svg\", import.meta.url).href,\n\t\t\t\ticonColor: \"#fff\",\n\t\t\t\tclose: true,\n\t\t\t\tcloseOnEscape: true,\n\t\t\t\tprogressBarColor: \"#0071bd\",\n\t\t\t\tposition: \"topRight\",\n\t\t\t\ttimeout: 4000,\n\t\t\t\tanimateInside: false,\n\t\t\t\ttransitionIn: \"bounceInLeft\"\n\t\t\t});\n\t\t}\n\n\t\t// Hide loader\n\t\tloader.classList.remove(\"_active\");\n\n\t\t// Show button \"Load more\" after first request\n\t\tif (totalPages > 1 && totalPages > pageNumber) {\n\t\t\tloadMoreBtn.classList.add(\"_active\");\n\t\t}\n\n\t\t// Increase the group number\n\t\tif (totalPages > 1) {\n\t\t\tpageNumber += 1;\n\t\t}\n\n\t\treturn responseData.hits; // return array of objects with images\n\t}\n\tcatch (error) {\n\t\t// Блок коду для обробки помилок, що виникли у блоці try\n\t\tconsole.log(error);\n\t\t// При виникнені непередбаченої помилки (наприклад зник інтернет) потрібно сповіщати кристувача\n\t\tiziToast.error({\n\t\t\tclass: \"error\",\n\t\t\ttitleColor: \"#fff\",\n\t\t\ttitleSize: \"16px\",\n\t\t\ttitleLineHeight: \"1.5\",\n\t\t\tmessage: `Something went wrong.<br> ${error}`,\n\t\t\tbackgroundColor: \"#ef4040\",\n\t\t\tcolor: \"white\",\n\t\t\tmessageColor: \"#fff\",\n\t\t\tmessageSize: \"16px\",\n\t\t\tmessageLineHeight: \"1.5\",\n\t\t\ticonUrl: new URL(\"../img/error.svg\", import.meta.url).href,\n\t\t\ticonColor: \"#fff\",\n\t\t\tclose: true,\n\t\t\tcloseOnEscape: true,\n\t\t\tprogressBarColor: \"#b51b1b\",\n\t\t\tposition: \"topRight\",\n\t\t\ttimeout: 5000,\n\t\t\tanimateInside: false,\n\t\t\ttransitionIn: \"bounceInLeft\"\n\t\t});\n\t\t// Hide loader\n\t\tloader.classList.remove(\"_active\");\n\t}\n}\n\n// Якщо результат асинхронної функції використовується в іншій асинхронній функції, помилки оброблюються конструкцією try...catch\nasync function fetchImages(searchRequest) {\n\tconst searchParams = new URLSearchParams({\n\t\tkey: API_KEY,\n\t\tq: searchRequest,\n\t\timage_type: \"photo\",\n\t\torientation: \"horizontal\",\n\t\tsafesearch: \"true\",\n\t\tpage: pageNumber,\n\t\tper_page: resultPerPage,\n\t});\n\n\tconst response = await axios.get(`${BASE_URL}?${searchParams}`);\n\treturn response.data;\n}","import { showGallery } from \"./js/render-functions\"\nimport { getImagesPixabay } from \"./js/pixabay-api\"\nimport iziToast from \"izitoast\";\n\nlet searchRequest;\n\n// Show images via form\nconst searchForm = document.querySelector(\".search-form\");\nsearchForm.addEventListener(\"submit\", (event) => {\n\tevent.preventDefault();\n\n\t// Get Search request\n\tconst inputSearch = searchForm.elements.search;\n\tconst inputSearchValue = inputSearch.value.trim();\n\n\t// If the Search request is empty\n\tif (inputSearchValue === \"\") {\n\t\treturn iziToast.warning({\n\t\t\tclass: \"caution\",\n\t\t\ttitleColor: \"#fff\",\n\t\t\ttitleSize: \"16px\",\n\t\t\ttitleLineHeight: \"1.5\",\n\t\t\tmessage: \"Fill please all fields\",\n\t\t\tbackgroundColor: \"#ffa000\",\n\t\t\tcolor: \"white\",\n\t\t\tmessageColor: \"#fff\",\n\t\t\tmessageSize: \"16px\",\n\t\t\tmessageLineHeight: \"1.5\",\n\t\t\ticonUrl: new URL(\"./img/alert.svg\", import.meta.url).href,\n\t\t\ticonColor: \"#fff\",\n\t\t\tclose: true,\n\t\t\tcloseOnEscape: true,\n\t\t\tprogressBarColor: \"#bb7b10\",\n\t\t\tposition: \"topRight\",\n\t\t\ttimeout: 3000,\n\t\t\tanimateInside: false,\n\t\t\ttransitionIn: \"bounceInLeft\"\n\t\t});\n\t}\n\n\tsearchRequest = inputSearchValue;\n\n\t// Get images\n\tgetImagesPixabay(searchRequest, true).then((images) => {\n\t\t// Show images\n\t\tshowGallery(images, true);\n\t})\n})\n\n// Show images via Button \"Load more\"\nconst loadMoreBtn = document.querySelector(\".gallery__btn-more\");\nloadMoreBtn.addEventListener(\"click\", () => {\n\t// Get images\n\tgetImagesPixabay(searchRequest, false).then((images) => {\n\t\t// Show images\n\t\tshowGallery(images, false);\n\n\t\t// Page scrolling\n\t\tconst galleryElement = document.querySelector(\".gallery__item\");\n\t\tconst hightGalleryElement = galleryElement.getBoundingClientRect().height;\n\n\t\twindow.scrollBy({\n\t\t\ttop: (hightGalleryElement * 2),\n\t\t\tleft: 0,\n\t\t\tbehavior: \"smooth\",\n\t\t});\n\t})\n})\n"],"names":["galleryList","showGallery","images","isNewSearchRequest","iziToast","generateGalleryItems","image","SimpleLightbox","API_KEY","BASE_URL","loadMoreBtn","pageNumber","resultPerPage","getImagesPixabay","searchRequest","loader","responseData","fetchImages","totalPages","error","searchParams","axios","searchForm","event","inputSearchValue","hightGalleryElement"],"mappings":"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"}